## Установка проекта

Требуется наличие Ubuntu с установленными на него composer, git, docker.

В терминале Ubuntu перейти в нужную директорию и запустить команды:

-     git clone https://github.com/Nickkolass/shop.git
-     composer install
-     cp .env.example .env
- В проекте подключены сервисы TELEGRAM_LOG, YANDEX_SMTP, YANDEX_CLOUD, YANDEX_DISK, YOO_KASSA, NGROK. В целях
  предоставления
  возможности просмотра функционала без соответствующих токенов, по умолчанию приложение настроено на использованием
  автономных средств. Логирование в телеграм отключено. Почтовая рассылка ставится в очередь и при ее запуске без
  подключения сервиса почты задание будет перемещено в failed. Хранилище используется локальное. Скачиваемые с ya.disk
  файлы расшарены и при отсутствии токена используется публичная ссылка на файлы. Функционал платежной системы
  выполнен через заглушку (без привязки банковской карты). Для активации сервисов необходимо:
    - TELEGRAM_LOG: в файле .env в поле TELEGRAM_LOGGER_CHAT_ID и TELEGRAM_LOGGER_BOT_TOKEN установить значения чата в
      telegram и токена приглашенного в него бота. В файле config/logging.php в поле channels.stack.channels добавить
      значение 'telegram'.
    - YANDEX_SMTP: в файле .env в поле MAIL_USERNAME и MAIL_PASSWORD установить значения используемого почтового ящика в
      домене yandex.ru.
    - YANDEX_CLOUD: в файле .env в поле FILESYSTEM_DISK установить значение 'yandexcloud', в поля YANDEX_CLOUD_KEY,
      YANDEX_CLOUD_SECRET, YANDEX_CLOUD_BUCKET - соответствующие значения сервиса.
    - YANDEX_DISK: в файле .env в поле YANDEX_DISK_OAUTH_TOKEN установить значение токена для сервиса Yandex.disk
    - YOO_KASSA:
        - в файле .env в поле PAYMENT_CONNECTION установить значение 'yookassa', в поле NGROK_TOKEN установить значение
          токена для сервиса ngrok
        - выполнить команды
            -     docker exec -it shop_app bash
                -     php artisan ngrok:init
                -     ./ngrok http host.docker.internal:8876
        - в личном кабинете yookassa https://yookassa.ru/my/merchant/integration/http-notifications, а также
          https://yookassa.ru/my/gate/integration/webhooks в полях "URL для уведомлений" установить значение, выведенное
          в результате выполнения команд в терминале в поле "Forwarding" с добавлением "/api/orders/payment/callback",
          например https://d93f-217-65-215-218.ngrok-free.app/api/orders/payment/callback. В графах "О каких событиях
          уведомлять" выбрать все.
-     docker compose up -d
-     docker exec -it shop_app bash
    -     php artisan init

## Начало работы

Доступный к просмотру функционал зависит от роли пользователя:

- без регистрации: просмотр клиенской части приложения c возможностью просмотра и фильтрации товаров, работы с корзиной;
- с регистрацией без подтверждения email добавляются возможности добавления товаров в избранное, работы с данными
  пользователя;
- с подтверждением email (требуется подключение сервиса yandex.smtp) добавляются возможности работы с заказами и
  оставлять комментарии;
- под сгенерированным пользователем с правами подтвержденного клиента ['email' => '3@mail.ru', 'password' => '3']
  добавляются тестовые данные: заказы и избранные товары;
- под сгенерированным пользователем с правами подтвержденного продавца ['email' => '2@mail.ru', 'password' => '2']
  добавляется возможность входа в админпанель для работы с товарами и заказами, относящимися к пользователю, а также
  просмотра статистических данных с соответствующими тестовыми данными;
- под сгенерированным пользователем с правами администратора ['email' => '1@mail.ru', 'password' => '1'] добавляются
  возможности по работе с заказами всех пользователей в клиентской части, а также по работе в админпанели с данными всех
  пользователей, товарами и заказами всех пользователей, с категориями, классификаторами, характеристиками и тегами с
  соответствующими тестовыми данными.
