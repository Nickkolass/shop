## Установка проекта

Требуется наличие Ubuntu с установленными на него composer, git, docker.

В терминале Ubuntu перейти в нужную директорию и запустить команды:

-     git clone https://github.com/Nickkolass/shop.git
-     composer install
-     cp .env.example .env
- В проекте подключены сервисы TELEGRAM_LOG, YANDEX_SMTP, YANDEX_CLOUD, YANDEX_DISK. В целях предоставления возможности
  просмотра функционала без соответствующих токенов, по умолчанию приложение настроено на использованием автономных
  средств. Логирование в телеграм отключено. Почтовая рассылка ставится в очередь и при ее запуске без подключения
  сервиса job будет перемещен в failed. Хранилище используется локальное. Скачиваемые с ya.disk файлы расшарены и при
  отсутствии токена используется публичная ссылка на файлы.
  Для активации сервисов необходимо:
    - TELEGRAM_LOG: в файле .env в поле TELEGRAM_LOGGER_CHAT_ID и TELEGRAM_LOGGER_BOT_TOKEN установить значения чата в
      telegram и токена приглашенного в него бота. В файле config/logging.php в поле channels.stack.channels добавить
      значение 'telegram'.
    - YANDEX_SMTP: в файле .env в поле MAIL_USERNAME и MAIL_PASSWORD установить значения используемого почтового ящика в
      домене yandex.ru. По умолчанию отправка писем настроена через постановку в
    - YANDEX_CLOUD: в файле .env в поле FILESYSTEM_DISK установить значение 'yandexcloud', в поля YANDEX_CLOUD_KEY,
      YANDEX_CLOUD_SECRET, YANDEX_CLOUD_BUCKET - соответствующие значения сервиса.
    - YANDEX_DISK: в файле .env в поле YANDEX_DISK_OAUTH_TOKEN установить значение токена для сервиса Yandex.disk
-     docker compose up -d
-     docker exec -it shop_app bash
    -     php artisan init

## Начало работы

Для просмотра функционала может быть использовано несколько вариантов:

- без регистрации: просмотр клиенской части приложения c возможностью просмотра и фильтрации товаров, работы с корзиной;
- с регистрацией без подтверждения email добавляются возможности добавления товаров в избранное, работы с данными
  пользователя;
- с подтверждением email (требуется подключение сервиса yandex.smtp) добавляются возможности работы с заказами и
  оставлять комментарии;
- под пользователем с правами подтвержденного клиента ['email' => '3@mail.ru', 'password' => '3'] добавляются тестовые
  данные: заказы и избранные товары;
- под пользователем с правами подтвержденного продавца ['email' => '2@mail.ru', 'password' => '2'] добавляется
  возможность входа в админпанель для работы с товарами и заказами, относящимися к пользователю, а также просмотра
  статистических данных с соответствующими тестовыми данными;
- под пользователем с правами администратора ['email' => '1@mail.ru', 'password' => '1'] добавляются возможности по
  работе с заказами всех пользователей в клиентской части, а также по работе в админпанели с данными всех
  пользователей, товарами и заказами всех пользователей, с категориями, классификаторами, характеристиками и тегами с
  соответствующими тестовыми данными.

Для обработки процессов, поставленных в очередь выполнить команды

-     docker exec -it shop_app bash
    -     php artisan queue:work

Для запуска планировщика задач выполнить команды

-     docker exec -it shop_app bash
    -     php artisan schedule:work

Перед тестированием выполнить команды

-     docker exec -it shop_app bash
    -     php artisan config:clear
